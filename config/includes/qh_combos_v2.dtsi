#define COMBO_TERM_FAST 35
#define COMBO_TERM_SLOW 40
#define COMBO_PRIOR_IDLE 100

/ {
  combos {
    compatible = "zmk,combos";

/*                                      42 KEY MATRIX / LAYOUT MAPPING

  ╭────────────────────────┬────────────────────────╮ ╭─────────────────────────┬─────────────────────────╮
  │  0   1   2   3   4   5 │  6   7   8   9  10  11 │ │ LT5 LT4 LT3 LT2 LT1 LT0 │ RT0 RT1 RT2 RT3 RT4 RT5 │
  │ 12  13  14  15  16  17 │ 18  19  20  21  22  23 │ │ LM5 LM4 LM3 LM2 LM1 LM0 │ RM0 RM1 RM2 RM3 RM4 RM5 │
  │ 24  25  26  27  28  29 │ 30  31  32  33  34  35 │ │ LB5 LB4 LB3 LB2 LB1 LB0 │ RB0 RB1 RB2 RB3 RB4 RB5 │
  ╰───────────╮ 36  37  38 │ 39  40  41 ╭───────────╯ ╰───────────╮ LH2 LH1 LH0 │ RH0 RH1 RH2 ╭───────────╯
              ╰────────────┴────────────╯                         ╰─────────────┴─────────────╯             */
              
    // start base funcs
    alt_l {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <LM1 LH1>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp LEFT_ALT>;
    };

    gui_alt_l {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <LM2 LH1>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp LG(LEFT_ALT)>;
    };

    ctrl_l {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <LM3 LH1>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp LCTRL>;
    };

    ctrl_a_l {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <LM4 LH1>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp LC(A)>;
    };

    alt_r {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <RM1 RH1>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp RALT>;
    };

    gui_alt_r {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <RH1 RM2>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp RG(RIGHT_ALT)>;
    };

    ctrl_r {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <RM3 RH1>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp RCTRL>;
    };

    ctrl_alt_r {
        timeout-ms = <COMBO_TERM_SLOW>;
        key-positions = <RM4 RH1>;
        layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
        bindings = <&kp RA(RCTRL)>;
    };

    // end base funcs


    // start 布局切换
    base_qwerty_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <LT0 LB0 LH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog BASE_QWERTY>;
    };

    base_qwerty_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <RT0 RB0 RH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog BASE_QWERTY>;
    };

    base_colemak_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <LT1 LB1 LH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog BASE_COLEMAK>;
    };

    base_colemak_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <RT1 RB1 RH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog BASE_COLEMAK>;
    };

    base_dvorak_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <LT2 LB2 LH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog BASE_DVORAK>;
    };

    base_dvorak_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <RT2 RB2 RH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog BASE_DVORAK>;
    };

    // end 布局切换

    // start media
    base_media_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <LT5 LT4 LH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog MEDIA_EXT>;
    };
    base_media_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <RT5 RT4 RH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog MEDIA_EXT>;
    };
    // end media

    // start settings
    combo_tog_sys_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <LT5 LB5 LH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog SYS>;
    };

    combo_tog_sys_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <RT5 RB5 RH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog SYS>;
    };
#ifdef HAS_MOUSE_TP
    combo_tog_mouse_settings_l {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <LT4 LB4 LH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog MOUSE_SET>;
    };

    combo_tog_mouse_settings_r {
      timeout-ms = <COMBO_TERM_SLOW>;
      // require-prior-idle-ms = <COMBO_PRIOR_IDLE>;
      key-positions = <RT4 RB4 RH1>;
      layers = <BASE_QWERTY BASE_COLEMAK BASE_DVORAK>;
      bindings = <&tog MOUSE_SET>;
    };
#endif

    // end settings

  };
};
